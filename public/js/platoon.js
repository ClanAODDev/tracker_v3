(()=>{var t;t=jQuery,{setup:function(){this.handleMembers(),this.handleSquadMembers(),this.handleForumActivityChart(),this.handleTSActivityChart(),this.initAutocomplete()},handleForumActivityChart:function(){var e=t(".forum-activity-chart");e.length&&new Chart(e,{type:"doughnut",data:{datasets:[{data:e.data("values"),backgroundColor:e.data("colors"),borderWidth:0}],labels:e.data("labels")},options:{rotation:1*Math.PI,circumference:1*Math.PI,legend:{position:"bottom",labels:{boxWidth:5,fontColor:"#949ba2"},label:{fullWidth:!1}}}})},handleTSActivityChart:function(){var e=t(".ts-activity-chart");e.length&&new Chart(e,{type:"doughnut",data:{datasets:[{data:e.data("values"),backgroundColor:e.data("colors"),borderWidth:0}],labels:e.data("labels")},options:{rotation:1*Math.PI,circumference:1*Math.PI,legend:{position:"bottom",labels:{boxWidth:5,fontColor:"#949ba2"},label:{fullWidth:!1}}}})},handleSquadMembers:function(){var e,a,r,o;t(".sortable-squad").sortable({revert:"invalid"}),t(".draggable").draggable({connectToSortable:"ul",revert:"invalid",scroll:!0,scrollSensitivity:100}),t(".mod-plt .sortable").sortable({connectWith:"ul",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,revert:"invalid",receive:function(l,n){e=t(n.item).attr("data-member-id"),a=t(this).attr("data-squad-id"),r=t(n.sender).find("li").length,o=t(this).find("li").length,void 0===a?(toastr.error("You cannot move members to the unassigned list"),t(".mod-plt .sortable").sortable("cancel")):(t(".genpop").find("li").length<1&&t(".genpop").fadeOut(),t(n.sender).parent().find(".count").text(r),t(this).parent().find(".count").text(o).effect("highlight"),t.ajax({type:"POST",url:window.Laravel.appPath+"/members/assign-squad",data:{member_id:e,squad_id:a,_token:t("meta[name=csrf-token]").attr("content")},dataType:"json",success:function(){toastr.success("Member reassigned!")},error:function(){toastr.error("Something bad happened...")}}))}})},initAutocomplete:function(){t("#leader").bootcomplete({url:window.Laravel.appPath+"/search-member/",minLength:3,idField:!0,method:"POST",dataParams:{_token:t("meta[name=csrf-token]").attr("content")}})},handleMembers:function(){parseInt(t(".platoon-number").text());var e=new Date;e.getDate(),e.getMonth();if(e.getFullYear(),new Array,t(".members-table").length){var a=t("table.members-table").DataTable({initComplete:function(e,a){setTimeout((function(){t(".ld-loading").removeClass("ld-loading")}),2e3)},autoWidth:!0,bInfo:!1,oLanguage:{sLengthMenu:""},columnDefs:[{orderable:!1,className:"select-checkbox",targets:0},{targets:"no-search",searchable:!1},{targets:"col-hidden",visible:!1},{iDataSort:0,aTargets:[3]},{iDataSort:1,aTargets:[5]},{iDataSort:7,aTargets:[6]}],select:{style:"os",selector:"td:first-child"},stateSave:!0,paging:!1});t("a.toggle-vis").on("click",(function(e){e.preventDefault();var r=a.column(t(this).attr("data-column"));r.visible(!r.visible())})),t(".dataTables_filter input").appendTo("#playerFilter").removeClass("input-sm"),t("#playerFilter input").attr({placeholder:"Search Players",class:"form-control"}),t(".dataTables_filter label").remove(),t(".no-sort").removeClass("sorting"),a.on("select",(function(e,r,o,l){var n=a.rows(t(".selected")).data().toArray().map((function(t){return t[11]}));n.length>=2&&(t("#selected-data").show(),t("#selected-data .status-text").text("With selected ("+n.length+")"),t("#pm-member-data").val(n))}))}function r(){t("#is_tba").is(":checked")?t("#leader_id, #leader").prop("disabled",!0).val(""):t("#leader_id, #leader").prop("disabled",!1)}t("#is_tba").click((function(){r()})),r()}}.setup()})();