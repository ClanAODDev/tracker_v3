const l=window.jQuery;l("#preset-select").on("change",function(){var p=parseInt(l(this).val());if(p){var c=new Date,h=new Date;h.setMonth(h.getMonth()-p),h.setDate(1),c.setMonth(c.getMonth()+1),c.setDate(0),l("#start").val(h.toISOString().split("T")[0]),l("#end").val(c.toISOString().split("T")[0]),l(this).closest("form").submit()}});(function(p){function c(r,e,u,n){var i=e.xaxis.options.mode=="categories",a=e.yaxis.options.mode=="categories";if(i||a){var t=n.format;if(!t){var o=e;if((t=[]).push({x:!0,number:!0,required:!0}),t.push({y:!0,number:!0,required:!0}),o.bars.show||o.lines.show&&o.lines.fill){var b=!!(o.bars.show&&o.bars.zero||o.lines.show&&o.lines.zero);t.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:b}),o.bars.horizontal&&(delete t[t.length-1].y,t[t.length-1].x=!0)}n.format=t}for(var s=0;s<t.length;++s)t[s].x&&i&&(t[s].number=!1),t[s].y&&a&&(t[s].number=!1)}}function h(r){var e=[];for(var u in r.categories){var n=r.categories[u];n>=r.min&&n<=r.max&&e.push([n,u])}return e.sort(function(i,a){return i[0]-a[0]}),e}function y(r,e,u){if(r[e].options.mode=="categories"){if(!r[e].categories){var n={},i=r[e].options.categories||{};if(p.isArray(i))for(var a=0;a<i.length;++a)n[i[a]]=a;else for(var t in i)n[t]=i[t];r[e].categories=n}r[e].options.ticks||(r[e].options.ticks=h),(function(o,b,s){for(var d=o.points,k=o.pointsize,j=o.format,A=b.charAt(0),z=(function(x){var w=-1;for(var M in x)x[M]>w&&(w=x[M]);return w+1})(s),g=0;g<d.length;g+=k)if(d[g]!=null)for(var v=0;v<k;++v){var m=d[g+v];m!=null&&j[v][A]&&(m in s||(s[m]=z,++z),d[g+v]=s[m])}})(u,e,r[e].categories)}}function I(r,e,u){y(e,"xaxis",u),y(e,"yaxis",u)}p.plot.plugins.push({init:function(r){r.hooks.processRawData.push(c),r.hooks.processDatapoints.push(I)},options:{xaxis:{categories:null},yaxis:{categories:null}},name:"categories",version:"1.0"})})(jQuery);var f=l("#retention-chart");if(f.length){var S=f.data("recruits"),q=f.data("removals"),C=f.data("population"),D={series:{points:{show:!0,radius:2,symbol:"circle"},splines:{show:!0,tension:.4,lineWidth:1,fill:.1}},grid:{tickColor:"#404652",borderWidth:1,color:"#000",borderColor:"#404652"},tooltip:!1,xaxis:{mode:"categories",tickLength:0},colors:["#1bbf89","#f7af3e","#0F83C9"]};l.plot(f,[S,q,C],D),l(window).resize(function(){l.plot(f,[S,q,C],D)})}
