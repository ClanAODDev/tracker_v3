(function(){var o={currentStep:0,checkpoints:{},totalCheckpoints:0,init:function(){this.cacheElements(),this.$container&&(this.bindEvents(),this.calculateTotals(),this.addHeadingAnchors(),this.openLinksInNewWindow(),this.handleInitialHash())},cacheElements:function(){this.$container=document.querySelector(".training-stepper"),this.$container&&(this.$steps=this.$container.querySelectorAll(".training-stepper__step"),this.$sections=this.$container.querySelectorAll(".training-stepper__section"),this.$checkboxes=this.$container.querySelectorAll(".training-checkpoint"),this.$progressFill=this.$container.querySelector(".training-stepper__progress-fill"),this.$totalComplete=this.$container.querySelector(".total-complete"))},bindEvents:function(){var t=this;this.$steps.forEach(function(n){n.addEventListener("click",function(){var i=parseInt(this.dataset.step,10);t.goToStep(i)})}),this.$container.querySelectorAll(".training-stepper__prev, .training-stepper__next").forEach(function(n){n.addEventListener("click",function(){var i=parseInt(this.dataset.target,10);t.goToStep(i)})}),this.$checkboxes.forEach(function(n){n.addEventListener("change",function(){t.handleCheckboxChange(this)})}),window.addEventListener("hashchange",function(){t.handleHashChange()});var e=this.$container.querySelector(".training-stepper__fullscreen-toggle");e&&e.addEventListener("click",function(){t.toggleFullscreen()}),document.addEventListener("keydown",function(n){n.key==="Escape"&&t.isFullscreen()&&t.toggleFullscreen()})},isFullscreen:function(){return document.getElementById("training-container").classList.contains("training-fullscreen")},toggleFullscreen:function(){var t=document.getElementById("training-container");t.classList.toggle("training-fullscreen"),document.body.style.overflow=this.isFullscreen()?"hidden":""},addHeadingAnchors:function(){var t=this,e=this.$container.querySelectorAll(".training-stepper__markdown h4, .training-stepper__markdown h5");e.forEach(function(n){var i=n.textContent.trim(),c=t.slugify(i);n.id=c;var s=document.createElement("a");s.href="#"+c,s.className="heading-anchor",s.innerHTML='<i class="fa fa-link"></i>',s.title="Link to this section",s.addEventListener("click",function(a){a.preventDefault(),history.pushState(null,null,"#"+c),t.scrollToElement(n)}),n.appendChild(s)})},openLinksInNewWindow:function(){var t=this.$container.querySelectorAll(".training-stepper__markdown a:not(.heading-anchor)");t.forEach(function(e){e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer")})},slugify:function(t){return t.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()},handleInitialHash:function(){window.location.hash&&this.handleHashChange()},handleHashChange:function(){var t=window.location.hash.substring(1);if(t){var e=document.getElementById(t);if(e){var n=e.closest(".training-stepper__section");if(n){var i=parseInt(n.dataset.section,10);this.goToStep(i),setTimeout(function(){e.scrollIntoView({behavior:"smooth",block:"start"}),e.classList.add("heading-highlight"),setTimeout(function(){e.classList.remove("heading-highlight")},2e3)},100)}}}},scrollToElement:function(t){t.scrollIntoView({behavior:"smooth",block:"start"}),t.classList.add("heading-highlight"),setTimeout(function(){t.classList.remove("heading-highlight")},2e3)},calculateTotals:function(){var t=this;this.totalCheckpoints=this.$checkboxes.length,this.$steps.forEach(function(e,n){var i=t.$container.querySelectorAll('.training-checkpoint[data-section="'+n+'"]');t.checkpoints[n]={total:i.length,checked:0}})},goToStep:function(t){t<0||t>=this.$sections.length||(this.$steps.forEach(function(e){e.classList.remove("active")}),this.$sections.forEach(function(e){e.classList.remove("active")}),this.$steps[t].classList.add("active"),this.$sections[t].classList.add("active"),this.currentStep=t)},handleCheckboxChange:function(t){var e=parseInt(t.dataset.section,10),n=t.closest(".training-stepper__checkpoint");t.checked?(n.classList.add("checked"),this.checkpoints[e].checked++):(n.classList.remove("checked"),this.checkpoints[e].checked--),this.updateProgress(),this.updateStepStatus(e)},updateProgress:function(){var t=0;for(var e in this.checkpoints)t+=this.checkpoints[e].checked;var n=this.totalCheckpoints>0?t/this.totalCheckpoints*100:0;this.$progressFill&&(this.$progressFill.style.width=n+"%"),this.$totalComplete&&(this.$totalComplete.textContent=t)},updateStepStatus:function(t){var e=this.$steps[t],n=this.checkpoints[t],i=e.querySelector(".checkpoint-count");i&&(i.textContent=n.checked),n.checked===n.total&&n.total>0?e.classList.add("completed"):e.classList.remove("completed")}};document.addEventListener("DOMContentLoaded",function(){o.init()})})();
