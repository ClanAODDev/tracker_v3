var s=s||{};(function(t){s={initUnassigned:function(){t(function(){t(".unassigned").draggable({revert:!0}),t(".platoon").droppable({hoverClass:"panel-c-success",drop:function(a,n){let i=t(this),o=window.Laravel.appPath,r=n.draggable.attr("data-member-id"),e=i.attr("data-platoon-id");t.ajax({type:"POST",url:o+"/members/"+r+"/assign-platoon",data:{platoon_id:e,_token:t("meta[name=csrf-token]").attr("content")},success:function(l){toastr.success("Member was assigned to platoon #"+e),t(n.draggable).remove(),t(".unassigned").length<1&&t(".unassigned-container").slideUp()}})}})})},setup:function(){this.initAutocomplete(),this.initSetup(),this.initUnassigned(),this.initPopulationChart()},initPopulationChart:function(){var a=document.getElementById("population-chart");if(a){var n=a.getContext("2d"),i=JSON.parse(a.dataset.labels||"[]"),o=JSON.parse(a.dataset.population||"[]"),r=JSON.parse(a.dataset.voice||"[]");if(i.length!==0){Math.max(...o);var e=Math.min(...o);new Chart(n,{type:"line",data:{labels:i,datasets:[{label:"Members",data:o,borderColor:"#5bc0de",backgroundColor:"rgba(91, 192, 222, 0.1)",borderWidth:2,fill:!0,tension:.3,pointRadius:3,pointHoverRadius:6,pointBackgroundColor:"#5bc0de",pointBorderColor:"#fff",pointBorderWidth:2},{label:"Voice Active",data:r,borderColor:"#1bbf89",backgroundColor:"rgba(27, 191, 137, 0.1)",borderWidth:2,fill:!0,tension:.3,pointRadius:2,pointHoverRadius:5,pointBackgroundColor:"#1bbf89",pointBorderColor:"#fff",pointBorderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!0,position:"top",align:"end",labels:{boxWidth:12,padding:15,color:"rgba(255, 255, 255, 0.7)",font:{size:11}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",padding:12,displayColors:!0,callbacks:{label:function(l){return l.dataset.label+": "+l.parsed.y}}}},scales:{x:{grid:{color:"rgba(255, 255, 255, 0.05)"},ticks:{color:"rgba(255, 255, 255, 0.5)",font:{size:10},maxRotation:45,minRotation:0}},y:{beginAtZero:!1,suggestedMin:e-Math.round(e*.1),grid:{color:"rgba(255, 255, 255, 0.05)"},ticks:{color:"rgba(255, 255, 255, 0.5)",font:{size:10}}}}}})}}},initSetup:function(){var a=t(".promotions-chart");a.length&&new Chart(a,{type:"doughnut",data:{datasets:[{data:a.data("values"),borderWidth:0,backgroundColor:["#949ba2","#0f83c9","#1bbf89","#f7af3e","#56c0e0","#db524b"]}],labels:a.data("labels")},options:{legend:{position:"bottom",labels:{boxWidth:5,fontColor:"#949ba2"},label:{fullWidth:!0}}}})},initAutocomplete:function(){t("#leader").bootcomplete({url:window.Laravel.appPath+"/search-member/",minLength:3,idField:!0,method:"POST",dataParams:{_token:t("meta[name=csrf-token]").attr("content")}})}}})(window.jQuery);s.setup();
