import{g as f,b as h,a as y,r as k}from"./chart-utils-PLXmSdtb.js";function d(){var r=window.jQuery;if(!r||typeof Chart>"u"){setTimeout(d,50);return}r("#preset-select").on("change",function(){var t=parseInt(r(this).val());if(t){var a=new Date,s=new Date;s.setMonth(s.getMonth()-t),s.setDate(1),a.setMonth(a.getMonth()+1),a.setDate(0),r("#start").val(s.toISOString().split("T")[0]),r("#end").val(a.toISOString().split("T")[0]),r(this).closest("form").submit()}});var o=document.getElementById("retention-chart");if(o){var n=JSON.parse(o.dataset.recruits||"[]"),u=JSON.parse(o.dataset.removals||"[]"),p=JSON.parse(o.dataset.population||"[]");if(n.length){var e=f(),i=h(e),l=y(e),c=n.map(function(t){return t[0]}),g=n.map(function(t){return t[1]}),v=u.map(function(t){return t[1]}),b=p.map(function(t){return t[1]}),m=new Chart(o,{type:"line",data:{labels:c,datasets:[{label:"Recruited",data:g,borderColor:e.success,backgroundColor:e.success+"1A",fill:!0,tension:.4,pointRadius:2,pointHoverRadius:4},{label:"Removed",data:v,borderColor:e.danger,backgroundColor:e.danger+"1A",fill:!0,tension:.4,pointRadius:2,pointHoverRadius:4},{label:"Population",data:b,borderColor:e.primary,backgroundColor:e.primary+"1A",fill:!0,tension:.4,pointRadius:2,pointHoverRadius:4}]},options:{...i,plugins:{...i.plugins,tooltip:{...i.plugins.tooltip,callbacks:{label:function(t){return t.dataset.label+": "+t.parsed.y}}}},scales:{x:l,y:{...l,beginAtZero:!0}}}});k(m,function(t,a){t.data.datasets[0].borderColor=a.success,t.data.datasets[0].backgroundColor=a.success+"1A",t.data.datasets[1].borderColor=a.danger,t.data.datasets[1].backgroundColor=a.danger+"1A",t.data.datasets[2].borderColor=a.primary,t.data.datasets[2].backgroundColor=a.primary+"1A",t.options.plugins.legend.labels.color=a.text,t.options.scales.x.grid.color=a.grid,t.options.scales.x.ticks.color=a.text,t.options.scales.y.grid.color=a.grid,t.options.scales.y.ticks.color=a.text,t.update()})}}}d();
