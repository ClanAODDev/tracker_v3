const l=window.jQuery;l("#preset-select").on("change",function(){var f=parseInt(l(this).val());if(f){var c=new Date,p=new Date;p.setMonth(p.getMonth()-f),p.setDate(1),c.setMonth(c.getMonth()+1),c.setDate(0),l("#start").val(p.toISOString().split("T")[0]),l("#end").val(c.toISOString().split("T")[0]),l(this).closest("form").submit()}});(function(f){function c(r,e,u,n){var i=e.xaxis.options.mode=="categories",a=e.yaxis.options.mode=="categories";if(i||a){var t=n.format;if(!t){var o=e;if((t=[]).push({x:!0,number:!0,required:!0}),t.push({y:!0,number:!0,required:!0}),o.bars.show||o.lines.show&&o.lines.fill){var x=!!(o.bars.show&&o.bars.zero||o.lines.show&&o.lines.zero);t.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:x}),o.bars.horizontal&&(delete t[t.length-1].y,t[t.length-1].x=!0)}n.format=t}for(var s=0;s<t.length;++s)t[s].x&&i&&(t[s].number=!1),t[s].y&&a&&(t[s].number=!1)}}function p(r){var e=[];for(var u in r.categories){var n=r.categories[u];n>=r.min&&n<=r.max&&e.push([n,u])}return e.sort(function(i,a){return i[0]-a[0]}),e}function k(r,e,u){if(r[e].options.mode=="categories"){if(!r[e].categories){var n={},i=r[e].options.categories||{};if(f.isArray(i))for(var a=0;a<i.length;++a)n[i[a]]=a;else for(var t in i)n[t]=i[t];r[e].categories=n}r[e].options.ticks||(r[e].options.ticks=p),(function(o,x,s){for(var m=o.points,z=o.pointsize,j=o.format,A=x.charAt(0),S=(function(y){var w=-1;for(var V in y)y[V]>w&&(w=y[V]);return w+1})(s),g=0;g<m.length;g+=z)if(m[g]!=null)for(var v=0;v<z;++v){var d=m[g+v];d!=null&&j[v][A]&&(d in s||(s[d]=S,++S),m[g+v]=s[d])}})(u,e,r[e].categories)}}function I(r,e,u){k(e,"xaxis",u),k(e,"yaxis",u)}f.plot.plugins.push({init:function(r){r.hooks.processRawData.push(c),r.hooks.processDatapoints.push(I)},options:{xaxis:{categories:null},yaxis:{categories:null}},name:"categories",version:"1.0"})})(jQuery);var h=l("#retention-chart");if(h.length){var M=h.data("recruits"),P=h.data("removals"),q=h.data("population"),b=getComputedStyle(document.documentElement),C=b.getPropertyValue("--color-bg-panel").trim()||"#404652",Q=b.getPropertyValue("--color-success").trim()||"#1bbf89",T=b.getPropertyValue("--color-accent").trim()||"#f7af3e",W=b.getPropertyValue("--color-primary").trim()||"#0F83C9",D={series:{points:{show:!0,radius:2,symbol:"circle"},splines:{show:!0,tension:.4,lineWidth:1,fill:.1}},grid:{tickColor:C,borderWidth:1,color:"#000",borderColor:C},tooltip:!1,xaxis:{mode:"categories",tickLength:0},colors:[Q,T,W]};l.plot(h,[M,P,q],D),l(window).resize(function(){l.plot(h,[M,P,q],D)})}
