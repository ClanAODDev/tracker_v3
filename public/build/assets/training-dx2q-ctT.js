(function(){var o={currentStep:0,checkpoints:{},totalCheckpoints:0,init:function(){this.cacheElements(),this.$container&&(this.bindEvents(),this.calculateTotals(),this.addHeadingAnchors(),this.openLinksInNewWindow(),this.handleInitialHash())},cacheElements:function(){this.$container=document.querySelector(".training-stepper"),this.$container&&(this.$steps=this.$container.querySelectorAll(".training-stepper__step"),this.$sections=this.$container.querySelectorAll(".training-stepper__section"),this.$checkboxes=this.$container.querySelectorAll(".training-checkpoint"),this.$progressFill=this.$container.querySelector(".training-stepper__progress-fill"),this.$totalComplete=this.$container.querySelector(".total-complete"))},bindEvents:function(){var t=this;this.$steps.forEach(function(e){e.addEventListener("click",function(){var i=parseInt(this.dataset.step,10);t.goToStep(i)})}),this.$container.querySelectorAll(".training-stepper__prev, .training-stepper__next").forEach(function(e){e.addEventListener("click",function(){var i=parseInt(this.dataset.target,10);t.goToStep(i)})}),this.$checkboxes.forEach(function(e){e.addEventListener("change",function(){t.handleCheckboxChange(this)})}),window.addEventListener("hashchange",function(){t.handleHashChange()});var n=this.$container.querySelector(".training-stepper__fullscreen-toggle");n&&n.addEventListener("click",function(){t.toggleFullscreen()}),document.addEventListener("keydown",function(e){e.key==="Escape"&&t.isFullscreen()&&t.toggleFullscreen()}),this.$container.querySelectorAll(".training-stepper__checkpoint-toggle").forEach(function(e){e.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation();var c=this.closest(".training-stepper__checkpoint-wrapper");c.classList.toggle("expanded")})})},isFullscreen:function(){return document.getElementById("training-container").classList.contains("training-fullscreen")},toggleFullscreen:function(){var t=document.getElementById("training-container");t.classList.toggle("training-fullscreen"),document.body.style.overflow=this.isFullscreen()?"hidden":""},addHeadingAnchors:function(){var t=this,n=this.$container.querySelectorAll(".training-stepper__markdown h4, .training-stepper__markdown h5");n.forEach(function(e){var i=e.textContent.trim(),c=t.slugify(i);e.id=c;var s=document.createElement("a");s.href="#"+c,s.className="heading-anchor",s.innerHTML='<i class="fa fa-link"></i>',s.title="Link to this section",s.addEventListener("click",function(a){a.preventDefault(),history.pushState(null,null,"#"+c),t.scrollToElement(e)}),e.appendChild(s)})},openLinksInNewWindow:function(){var t=this.$container.querySelectorAll(".training-stepper__markdown a:not(.heading-anchor)");t.forEach(function(n){n.setAttribute("target","_blank"),n.setAttribute("rel","noopener noreferrer")})},slugify:function(t){return t.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()},handleInitialHash:function(){window.location.hash&&this.handleHashChange()},handleHashChange:function(){var t=window.location.hash.substring(1);if(t){var n=document.getElementById(t);if(n){var e=n.closest(".training-stepper__section");if(e){var i=parseInt(e.dataset.section,10);this.goToStep(i),setTimeout(function(){n.scrollIntoView({behavior:"smooth",block:"start"}),n.classList.add("heading-highlight"),setTimeout(function(){n.classList.remove("heading-highlight")},2e3)},100)}}}},scrollToElement:function(t){t.scrollIntoView({behavior:"smooth",block:"start"}),t.classList.add("heading-highlight"),setTimeout(function(){t.classList.remove("heading-highlight")},2e3)},calculateTotals:function(){var t=this;this.totalCheckpoints=this.$checkboxes.length,this.$steps.forEach(function(n,e){var i=t.$container.querySelectorAll('.training-checkpoint[data-section="'+e+'"]');t.checkpoints[e]={total:i.length,checked:0}})},goToStep:function(t){t<0||t>=this.$sections.length||(this.$steps.forEach(function(n){n.classList.remove("active")}),this.$sections.forEach(function(n){n.classList.remove("active")}),this.$steps[t].classList.add("active"),this.$sections[t].classList.add("active"),this.currentStep=t)},handleCheckboxChange:function(t){var n=parseInt(t.dataset.section,10),e=t.closest(".training-stepper__checkpoint");t.checked?(e.classList.add("checked"),this.checkpoints[n].checked++):(e.classList.remove("checked"),this.checkpoints[n].checked--),this.updateProgress(),this.updateStepStatus(n)},updateProgress:function(){var t=0;for(var n in this.checkpoints)t+=this.checkpoints[n].checked;var e=this.totalCheckpoints>0?t/this.totalCheckpoints*100:0;this.$progressFill&&(this.$progressFill.style.width=e+"%"),this.$totalComplete&&(this.$totalComplete.textContent=t)},updateStepStatus:function(t){var n=this.$steps[t],e=this.checkpoints[t],i=n.querySelector(".checkpoint-count");i&&(i.textContent=e.checked),e.checked===e.total&&e.total>0?n.classList.add("completed"):n.classList.remove("completed")}};document.addEventListener("DOMContentLoaded",function(){o.init()})})();
