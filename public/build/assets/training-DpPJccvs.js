(function(){const c={currentStep:0,checkpoints:{},totalCheckpoints:0,init(){this.cacheElements(),this.$container&&(this.bindEvents(),this.calculateTotals(),this.addHeadingAnchors(),this.openLinksInNewWindow(),this.handleInitialHash())},cacheElements(){this.$container=document.querySelector(".training-stepper"),this.$container&&(this.$steps=this.$container.querySelectorAll(".training-stepper__step"),this.$sections=this.$container.querySelectorAll(".training-stepper__section"),this.$checkboxes=this.$container.querySelectorAll(".training-checkpoint"),this.$progressFill=this.$container.querySelector(".training-stepper__progress-fill"),this.$totalComplete=this.$container.querySelector(".total-complete"))},bindEvents(){this.$steps.forEach(t=>{t.addEventListener("click",()=>{const s=parseInt(t.dataset.step,10);this.goToStep(s)})}),this.$container.querySelectorAll(".training-stepper__prev, .training-stepper__next").forEach(t=>{t.addEventListener("click",()=>{const s=parseInt(t.dataset.target,10);this.goToStep(s)})}),this.$checkboxes.forEach(t=>{t.addEventListener("change",()=>{this.handleCheckboxChange(t)})}),window.addEventListener("hashchange",()=>{this.handleHashChange()});const e=this.$container.querySelector(".training-stepper__fullscreen-toggle");e&&e.addEventListener("click",()=>{this.toggleFullscreen()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.isFullscreen()&&this.toggleFullscreen()}),this.$container.querySelectorAll(".training-stepper__checkpoint-toggle").forEach(t=>{t.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),t.closest(".training-stepper__checkpoint-wrapper").classList.toggle("expanded")})})},isFullscreen(){return document.getElementById("training-container").classList.contains("training-fullscreen")},toggleFullscreen(){document.getElementById("training-container").classList.toggle("training-fullscreen"),document.body.style.overflow=this.isFullscreen()?"hidden":""},addHeadingAnchors(){this.$container.querySelectorAll(".training-stepper__markdown h4, .training-stepper__markdown h5").forEach(t=>{const s=t.textContent.trim(),n=this.slugify(s);t.id=n;const i=document.createElement("a");i.href=`#${n}`,i.className="heading-anchor",i.innerHTML='<i class="fa fa-link"></i>',i.title="Link to this section",i.addEventListener("click",o=>{o.preventDefault(),history.pushState(null,null,`#${n}`),this.scrollToElement(t)}),t.appendChild(i)})},openLinksInNewWindow(){this.$container.querySelectorAll(".training-stepper__markdown a:not(.heading-anchor)").forEach(t=>{t.setAttribute("target","_blank"),t.setAttribute("rel","noopener noreferrer")})},slugify(e){return e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()},handleInitialHash(){window.location.hash&&this.handleHashChange()},handleHashChange(){const e=window.location.hash.substring(1);if(!e)return;const t=document.getElementById(e);if(!t)return;const s=t.closest(".training-stepper__section");if(!s)return;const n=parseInt(s.dataset.section,10);this.goToStep(n),setTimeout(()=>{t.scrollIntoView({behavior:"smooth",block:"start"}),t.classList.add("heading-highlight"),setTimeout(()=>{t.classList.remove("heading-highlight")},2e3)},100)},scrollToElement(e){e.scrollIntoView({behavior:"smooth",block:"start"}),e.classList.add("heading-highlight"),setTimeout(()=>{e.classList.remove("heading-highlight")},2e3)},calculateTotals(){this.totalCheckpoints=this.$checkboxes.length,this.$steps.forEach((e,t)=>{const s=this.$container.querySelectorAll(`.training-checkpoint[data-section="${t}"]`);this.checkpoints[t]={total:s.length,checked:0}})},goToStep(e){e<0||e>=this.$sections.length||(this.$steps.forEach(t=>{t.classList.remove("active")}),this.$sections.forEach(t=>{t.classList.remove("active")}),this.$steps[e].classList.add("active"),this.$sections[e].classList.add("active"),this.currentStep=e)},handleCheckboxChange(e){const t=parseInt(e.dataset.section,10),s=e.closest(".training-stepper__checkpoint");e.checked?(s.classList.add("checked"),this.checkpoints[t].checked++):(s.classList.remove("checked"),this.checkpoints[t].checked--),this.updateProgress(),this.updateStepStatus(t)},updateProgress(){let e=0;Object.values(this.checkpoints).forEach(s=>{e+=s.checked});const t=this.totalCheckpoints>0?e/this.totalCheckpoints*100:0;this.$progressFill&&(this.$progressFill.style.width=`${t}%`),this.$totalComplete&&(this.$totalComplete.textContent=e)},updateStepStatus(e){const t=this.$steps[e],s=this.checkpoints[e],n=t.querySelector(".checkpoint-count");n&&(n.textContent=s.checked),s.checked===s.total&&s.total>0?t.classList.add("completed"):t.classList.remove("completed")}};document.addEventListener("DOMContentLoaded",()=>{c.init()})})();
